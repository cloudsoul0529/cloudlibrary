Index: src/main/java/org/seventhgroup/service/UserService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package org.seventhgroup.service;\r\n\r\nimport org.seventhgroup.entity.PageResult;\r\nimport org.seventhgroup.pojo.User;\r\n\r\n/*\r\nç”¨æˆ·æ¥å£\r\n */\r\npublic interface UserService{\r\n    //é€šè¿‡Userçš„ç”¨æˆ·è´¦å·å’Œç”¨æˆ·å¯†ç æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯\r\n    User login(User user);\r\n    //æ·»åŠ ç”¨æˆ·\r\n    void addUser(User user);\r\n    //æ ¹æ®ç”¨æˆ·idåŠç†ç”¨æˆ·ç¦»èŒ\r\n    void delUser(Integer id);\r\n    //ç¼–è¾‘ç”¨æˆ·ä¿¡æ¯\r\n    void editUser(User user);\r\n    //æœç´¢ç”¨æˆ·\r\n    PageResult searchUsers(User user, Integer pageNum, Integer pageSize);\r\n    //æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯\r\n    User findById(Integer id);\r\n\r\n\r\n    Integer checkName(String name);\r\n\r\n    Integer checkEmail(String email);\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/seventhgroup/service/UserService.java b/src/main/java/org/seventhgroup/service/UserService.java
--- a/src/main/java/org/seventhgroup/service/UserService.java	(revision a7864dc864ac90d18346620717353b945bbf55ba)
+++ b/src/main/java/org/seventhgroup/service/UserService.java	(date 1765179218995)
@@ -21,7 +21,7 @@
     User findById(Integer id);
 
 
-    Integer checkName(String name);
+    boolean checkName(String name);
 
-    Integer checkEmail(String email);
+    boolean checkEmail(String email);
 }
\ No newline at end of file
Index: src/main/java/org/seventhgroup/service/impl/UserServiceImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package org.seventhgroup.service.impl;\r\n\r\nimport com.github.pagehelper.Page;\r\nimport com.github.pagehelper.PageHelper;\r\nimport org.seventhgroup.dao.UserMapper;\r\nimport org.seventhgroup.entity.PageResult;\r\nimport org.seventhgroup.pojo.User;\r\nimport org.seventhgroup.service.UserService;\r\nimport org.seventhgroup.util.SHA256WithSaltUtil;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.security.NoSuchAlgorithmException;\r\nimport java.text.DateFormat;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.Date;\r\n\r\n@Service\r\npublic class UserServiceImpl  implements UserService {\r\n    //æ³¨å…¥userMapper\r\n    @Autowired\r\n    private UserMapper userMapper;\r\n    //æ ¹æ®ç”¨æˆ·é‚®ç®±è·å–ç›å’Œå“ˆå¸Œå€¼ï¼Œç„¶åéªŒè¯\r\n    @Override\r\n    public User login(User user) {\r\n        String salt = userMapper.getSalt(user);\r\n        String hash = userMapper.getHash(user);\r\n        if(SHA256WithSaltUtil.verify(user.getPassword(), salt, hash)){\r\n            return userMapper.login(user);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * æ–°å¢ç”¨æˆ·\r\n     * @param user æ–°å¢çš„ç”¨æˆ·ä¿¡æ¯\r\n     */\r\n    @Override\r\n    public void addUser(User user) {\r\n        //æ–°å¢çš„ç”¨æˆ· é»˜è®¤çŠ¶æ€éƒ½è®¾ç½®ä¸º0,å³æ³¨å†ŒçŠ¶æ€\r\n        user.setStatus(User.ACTIVE);\r\n        //è®¾ç½®ç›ä¸å“ˆå¸Œ\r\n        try {\r\n            byte[] salt = SHA256WithSaltUtil.generate16ByteSalt();\r\n            String hash = SHA256WithSaltUtil.encryptWith16ByteSalt(user.getPassword(),salt);\r\n            String storedSalt = SHA256WithSaltUtil.bytesToBase64(salt);\r\n            user.setPasswordSalt(storedSalt);\r\n            user.setPasswordHash(hash);\r\n        } catch (NoSuchAlgorithmException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        userMapper.addUser(user);\r\n    }\r\n\r\n    /**\r\n     * æ ¹æ®idåŠç†ç”¨æˆ·æ³¨é”€\r\n     * @param id æ³¨é”€ç”¨æˆ·çš„id\r\n     */\r\n    @Override\r\n    public void delUser(Integer id) {\r\n        //æ ¹æ®idæŸ¥è¯¢å‡ºç”¨æˆ·çš„å®Œæ•´ä¿¡æ¯\r\n        User user = this.findById(id);\r\n        //è®¾ç½®ç”¨æˆ·ä¸ºæ³¨é”€çŠ¶æ€\r\n        user.setStatus(User.DELETED);\r\n        //è®¾ç½®å½“å¤©ä¸ºç”¨æˆ·çš„æ³¨é”€æ—¶é—´\r\n        DateFormat dateFormat = new SimpleDateFormat(\"yyyy-MM-dd\");\r\n        user.setDeletedate(dateFormat.format(new Date()));\r\n        userMapper.editUser(user);\r\n    }\r\n\r\n    /**\r\n     * ç¼–è¾‘ç”¨æˆ·ä¿¡æ¯\r\n     * @param user æ›´æ–°ä¹‹åçš„ç”¨æˆ·ä¿¡æ¯\r\n     */\r\n    @Override\r\n    public void editUser(User user) {\r\n        userMapper.editUser(user);\r\n    }\r\n\r\n    /**\r\n     * æœç´¢ç”¨æˆ·\r\n     * @param user æœç´¢çš„æ¡ä»¶\r\n     * @param pageNum å½“å‰é¡µç \r\n     * @param pageSize æ¯é¡µæ˜¾ç¤ºæ•°é‡\r\n     * @return\r\n     */\r\n    @Override\r\n    public PageResult searchUsers(User user, Integer pageNum, Integer pageSize) {\r\n        // ä½¿ç”¨åˆ†é¡µæ’ä»¶:\r\n        PageHelper.startPage(pageNum, pageSize);\r\n        Page<User> page =  userMapper.searchUsers(user);\r\n        return new PageResult(page.getTotal(),page.getResult());\r\n    }\r\n\r\n    /**\r\n     * æ ¹æ®ç”¨æˆ·idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯\r\n     * @param id ç”¨æˆ·id\r\n     */\r\n    @Override\r\n    public User findById(Integer id) {\r\n        return userMapper.findById(id);\r\n    }\r\n\r\n    /**\r\n     * æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²ç»å­˜åœ¨\r\n     * @param name å¾…æ£€æŸ¥çš„ç”¨æˆ·å\r\n     */\r\n    @Override\r\n    public Integer checkName(String name) {\r\n        return userMapper.checkName(name);\r\n    }\r\n\r\n    /**\r\n     * æ£€æŸ¥ç”¨æˆ·é‚®ç®±æ˜¯å¦å­˜å‚¨\r\n     * @param email å¾…æ£€æŸ¥çš„ç”¨æˆ·é‚®ç®±\r\n     */\r\n    @Override\r\n    public Integer checkEmail(String email) {\r\n        return userMapper.checkEmail(email);\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/seventhgroup/service/impl/UserServiceImpl.java b/src/main/java/org/seventhgroup/service/impl/UserServiceImpl.java
--- a/src/main/java/org/seventhgroup/service/impl/UserServiceImpl.java	(revision a7864dc864ac90d18346620717353b945bbf55ba)
+++ b/src/main/java/org/seventhgroup/service/impl/UserServiceImpl.java	(date 1765179218988)
@@ -3,13 +3,13 @@
 import com.github.pagehelper.Page;
 import com.github.pagehelper.PageHelper;
 import org.seventhgroup.dao.UserMapper;
+import org.seventhgroup.dto.UserPasswordDTO;
 import org.seventhgroup.entity.PageResult;
 import org.seventhgroup.pojo.User;
 import org.seventhgroup.service.UserService;
 import org.seventhgroup.util.SHA256WithSaltUtil;
 import org.springframework.beans.factory.annotation.Autowired;
 import org.springframework.stereotype.Service;
-
 import java.security.NoSuchAlgorithmException;
 import java.text.DateFormat;
 import java.text.SimpleDateFormat;
@@ -17,14 +17,21 @@
 
 @Service
 public class UserServiceImpl  implements UserService {
-    //æ³¨å…¥userMapper
     @Autowired
     private UserMapper userMapper;
+
+    /**
+     * @author cloudsoul-ZX
+     * ç”¨æˆ·ç™»å½•
+     */
     //æ ¹æ®ç”¨æˆ·é‚®ç®±è·å–ç›å’Œå“ˆå¸Œå€¼ï¼Œç„¶åéªŒè¯
     @Override
     public User login(User user) {
-        String salt = userMapper.getSalt(user);
-        String hash = userMapper.getHash(user);
+        //è·å–ç›å’Œå“ˆå¸Œå€¼
+        UserPasswordDTO userPasswordDTO = userMapper.getPasswordDTO(user);
+        String salt = userPasswordDTO.getPasswordSalt();
+        String hash = userPasswordDTO.getPasswordHash();
+        //éªŒè¯æˆåŠŸåˆ™ç™»å½•
         if(SHA256WithSaltUtil.verify(user.getPassword(), salt, hash)){
             return userMapper.login(user);
         }
@@ -32,14 +39,13 @@
     }
 
     /**
-     * æ–°å¢ç”¨æˆ·
-     * @param user æ–°å¢çš„ç”¨æˆ·ä¿¡æ¯
+     * @author cloudsoul-ZX
+     * æ–°å¢ç”¨æˆ·ï¼ˆç®¡ç†å‘˜ï¼‰
      */
     @Override
     public void addUser(User user) {
-        //æ–°å¢çš„ç”¨æˆ· é»˜è®¤çŠ¶æ€éƒ½è®¾ç½®ä¸º0,å³æ³¨å†ŒçŠ¶æ€
         user.setStatus(User.ACTIVE);
-        //è®¾ç½®ç›ä¸å“ˆå¸Œ
+        //è®¾ç½®ç›ï¼Œè®¡ç®—å“ˆå¸Œå€¼
         try {
             byte[] salt = SHA256WithSaltUtil.generate16ByteSalt();
             String hash = SHA256WithSaltUtil.encryptWith16ByteSalt(user.getPassword(),salt);
@@ -53,16 +59,13 @@
     }
 
     /**
-     * æ ¹æ®idåŠç†ç”¨æˆ·æ³¨é”€
-     * @param id æ³¨é”€ç”¨æˆ·çš„id
+     * @author cloudsoul-ZX
+     * ç”¨æˆ·æ³¨é”€
      */
     @Override
     public void delUser(Integer id) {
-        //æ ¹æ®idæŸ¥è¯¢å‡ºç”¨æˆ·çš„å®Œæ•´ä¿¡æ¯
         User user = this.findById(id);
-        //è®¾ç½®ç”¨æˆ·ä¸ºæ³¨é”€çŠ¶æ€
         user.setStatus(User.DELETED);
-        //è®¾ç½®å½“å¤©ä¸ºç”¨æˆ·çš„æ³¨é”€æ—¶é—´
         DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
         user.setDeletedate(dateFormat.format(new Date()));
         userMapper.editUser(user);
@@ -106,8 +109,11 @@
      * @param name å¾…æ£€æŸ¥çš„ç”¨æˆ·å
      */
     @Override
-    public Integer checkName(String name) {
-        return userMapper.checkName(name);
+    public boolean checkName(String name) {
+        if (userMapper.checkName(name) != null) {
+            return true;
+        }
+        return false;
     }
 
     /**
@@ -115,7 +121,10 @@
      * @param email å¾…æ£€æŸ¥çš„ç”¨æˆ·é‚®ç®±
      */
     @Override
-    public Integer checkEmail(String email) {
-        return userMapper.checkEmail(email);
+    public boolean checkEmail(String email) {
+        if (userMapper.checkEmail(email) != null) {
+            return true;
+        }
+        return false;
     }
 }
Index: src/main/java/org/seventhgroup/controller/UserController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package org.seventhgroup.controller;\r\n\r\nimport org.seventhgroup.pojo.User;\r\nimport org.seventhgroup.service.UserService;\r\nimport org.seventhgroup.entity.PageResult;\r\nimport org.seventhgroup.entity.Result;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.ResponseBody;\r\nimport org.springframework.web.servlet.ModelAndView;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpSession;\r\n\r\n/**\r\n * ç”¨æˆ·ç™»å½•å’Œæ³¨é”€Controller\r\n */\r\n@Controller\r\n@RequestMapping(\"/user\")\r\npublic class UserController {\r\n    //æ³¨å…¥userService\r\n    @Autowired\r\n    private UserService userService;\r\n    /*\r\n   ç”¨æˆ·ç™»å½•\r\n    */\r\n    @RequestMapping(\"/login\")\r\n    public String login(User user, HttpServletRequest request) {\r\n        try {\r\n            User u = userService.login(user);\r\n            /*\r\n            ç”¨æˆ·è´¦å·å’Œå¯†ç æ˜¯å¦æŸ¥è¯¢å‡ºç”¨æˆ·ä¿¡æ¯\r\n                æ˜¯ï¼šå°†ç”¨æˆ·ä¿¡æ¯å­˜å…¥Sessionï¼Œå¹¶è·³è½¬åˆ°åå°é¦–é¡µ\r\n                å¦ï¼šRequeståŸŸä¸­æ·»åŠ æç¤ºä¿¡æ¯ï¼Œå¹¶è½¬å‘åˆ°ç™»å½•é¡µé¢\r\n             */\r\n            if (u != null) {\r\n                request.getSession().setAttribute(\"USER_SESSION\", u);\r\n                String role = u.getRole();\r\n                if (\"ADMIN\".equals(role)) {\r\n                    return \"redirect:/views/main.jsp\";\r\n                } else {\r\n                    return \"redirect:/views/index.jsp\";\r\n                }\r\n            }\r\n            request.setAttribute(\"msg\", \"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯\");\r\n            return \"forward:/views/login.jsp\";\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            request.setAttribute(\"msg\", \"ç³»ç»Ÿé”™è¯¯\");\r\n            return \"forward:/views/login.jsp\";\r\n        }\r\n    }\r\n\r\n    /*\r\n    æ³¨é”€ç™»å½•\r\n     */\r\n    @RequestMapping(\"/logout\")\r\n    public String logout(HttpServletRequest request) {\r\n        try {\r\n            HttpSession session = request.getSession();\r\n            //é”€æ¯Session\r\n            session.invalidate();\r\n            return \"forward:/views/login.jsp\";\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            request.setAttribute(\"msg\", \"ç³»ç»Ÿé”™è¯¯\");\r\n            return \"forward:/views/login.jsp\";\r\n        }\r\n    }\r\n\r\n    /**\r\n     * æ–°å¢ç”¨æˆ·\r\n     * @param user æ–°å¢çš„ç”¨æˆ·ä¿¡æ¯\r\n     */\r\n    @ResponseBody\r\n    @RequestMapping(\"/addUser\")\r\n    public Result addUser(User user) {\r\n        try {\r\n            userService.addUser(user);\r\n            return new Result(true, \"æ–°å¢æˆåŠŸ!\");\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            return new Result(false, \"æ–°å¢å¤±è´¥!\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * åŠç†ç”¨æˆ·ç¦»èŒ\r\n     * @param id ç¦»èŒçš„ç”¨æˆ·id\r\n     */\r\n    @ResponseBody\r\n    @RequestMapping(\"/delUser\")\r\n    public Result delUser(Integer id) {\r\n        try {\r\n            userService.delUser(id);\r\n            return new Result(true, \"ç¦»èŒåŠç†æˆåŠŸ!\");\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            return new Result(false, \"ç¦»èŒåŠç†å¤±è´¥!\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯\r\n     * @param user ä¿®æ”¹çš„ç”¨æˆ·ä¿¡æ¯\r\n     */\r\n    @ResponseBody\r\n    @RequestMapping(\"/editUser\")\r\n    public Result editUser(User user) {\r\n        try {\r\n            userService.editUser(user);\r\n            return new Result(true, \"ä¿®æ”¹æˆåŠŸ!\");\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            return new Result(false, \"ä¿®æ”¹å¤±è´¥!\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * æŸ¥è¯¢ç”¨æˆ·\r\n     * @param user æŸ¥è¯¢çš„æ¡ä»¶\r\n     * @param pageNum  æ•°æ®åˆ—è¡¨çš„å½“å‰é¡µç \r\n     * @param pageSize æ•°æ®åˆ—è¡¨1é¡µå±•ç¤ºå¤šå°‘æ¡æ•°æ®\r\n     */\r\n    @RequestMapping(\"/search\")\r\n    public ModelAndView search(User user, Integer pageNum, Integer pageSize) {\r\n        if (pageNum == null) {\r\n            pageNum = 1;\r\n        }\r\n        if (pageSize == null) {\r\n            pageSize = 10;\r\n        }\r\n        PageResult pageResult = userService.searchUsers(user, pageNum, pageSize);\r\n        ModelAndView modelAndView = new ModelAndView();\r\n        modelAndView.setViewName(\"/user\");\r\n        modelAndView.addObject(\"pageResult\", pageResult);\r\n        modelAndView.addObject(\"search\", user);\r\n        modelAndView.addObject(\"pageNum\", pageNum);\r\n        modelAndView.addObject(\"gourl\", \"/user/search\");\r\n        return modelAndView;\r\n    }\r\n\r\n    /**\r\n     * æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·\r\n     * @param id ç”¨æˆ·idï¼Œç”¨ä½œæŸ¥è¯¢æ¡ä»¶\r\n     */\r\n    @ResponseBody\r\n    @RequestMapping(\"/findById\")\r\n    public User findById(Integer id) {\r\n        return userService.findById(id);\r\n    }\r\n\r\n    /**\r\n     * æ£€æŸ¥ç”¨æˆ·åç§°æ˜¯å¦å·²ç»å­˜åœ¨\r\n     * @param name ç”¨æˆ·åç§°\r\n     */\r\n    @ResponseBody\r\n    @RequestMapping(\"/checkName\")\r\n    public Result checkName(String name) {\r\n        Integer count = userService.checkName(name);\r\n        if (count > 0) {\r\n            return new Result(false, \"åå­—é‡å¤!\");\r\n        } else {\r\n            return new Result(true, \"åå­—å¯ç”¨!\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * æ ¡éªŒç”¨æˆ·çš„é‚®ç®±æ˜¯å¦å·²ç»å­˜åœ¨\r\n     * @param email è¢«æ ¡éªŒçš„ç”¨æˆ·é‚®ç®±\r\n     */\r\n    @ResponseBody\r\n    @RequestMapping(\"/checkEmail\")\r\n    public Result checkEmail(String email) {\r\n        Integer count = userService.checkEmail(email);\r\n        if (count > 0) {\r\n            return new Result(false, \"é‚®ç®±é‡å¤!\");\r\n        } else {\r\n            return new Result(true, \"é‚®ç®±å¯ç”¨!\");\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/seventhgroup/controller/UserController.java b/src/main/java/org/seventhgroup/controller/UserController.java
--- a/src/main/java/org/seventhgroup/controller/UserController.java	(revision a7864dc864ac90d18346620717353b945bbf55ba)
+++ b/src/main/java/org/seventhgroup/controller/UserController.java	(date 1765179027662)
@@ -10,33 +10,31 @@
 import org.springframework.web.bind.annotation.ResponseBody;
 import org.springframework.web.servlet.ModelAndView;
 import javax.servlet.http.HttpServletRequest;
-import javax.servlet.http.HttpSession;
 
 /**
- * ç”¨æˆ·ç™»å½•å’Œæ³¨é”€Controller
+ * @author cloudsoul-ZX
+ * ç”¨æˆ·ç™»å½•ã€æŸ¥è¯¢ã€ç¼–è¾‘ã€æ–°å¢ã€æ³¨é”€
  */
 @Controller
 @RequestMapping("/user")
 public class UserController {
-    //æ³¨å…¥userService
     @Autowired
     private UserService userService;
-    /*
-   ç”¨æˆ·ç™»å½•
-    */
+
+    /**
+     * @author cloudsoul-ZX
+     * ç”¨æˆ·ç™»å½•
+     */
     @RequestMapping("/login")
     public String login(User user, HttpServletRequest request) {
         try {
             User u = userService.login(user);
-            /*
-            ç”¨æˆ·è´¦å·å’Œå¯†ç æ˜¯å¦æŸ¥è¯¢å‡ºç”¨æˆ·ä¿¡æ¯
-                æ˜¯ï¼šå°†ç”¨æˆ·ä¿¡æ¯å­˜å…¥Sessionï¼Œå¹¶è·³è½¬åˆ°åå°é¦–é¡µ
-                å¦ï¼šRequeståŸŸä¸­æ·»åŠ æç¤ºä¿¡æ¯ï¼Œå¹¶è½¬å‘åˆ°ç™»å½•é¡µé¢
-             */
             if (u != null) {
+                //å­˜å‚¨ç”¨æˆ·ä¿¡æ¯
                 request.getSession().setAttribute("USER_SESSION", u);
+                //æ ¹æ®è§’è‰²è·³è½¬è‡³ä¸åŒé¡µé¢
                 String role = u.getRole();
-                if ("ADMIN".equals(role)) {
+                if (role.equals("ADMIN")) {
                     return "redirect:/views/main.jsp";
                 } else {
                     return "redirect:/views/index.jsp";
@@ -51,26 +49,20 @@
         }
     }
 
-    /*
-    æ³¨é”€ç™»å½•
+    /**
+     * @author cloudsoul-ZX
+     * æ³¨é”€ç™»å½•
      */
     @RequestMapping("/logout")
     public String logout(HttpServletRequest request) {
-        try {
-            HttpSession session = request.getSession();
-            //é”€æ¯Session
-            session.invalidate();
-            return "forward:/views/login.jsp";
-        } catch (Exception e) {
-            e.printStackTrace();
-            request.setAttribute("msg", "ç³»ç»Ÿé”™è¯¯");
-            return "forward:/views/login.jsp";
-        }
+        //é”€æ¯Sessionï¼Œæ¸…é™¤æ•°æ®å¹¶è·³è½¬å›ç™»é™†é¡µé¢
+        request.getSession().invalidate();
+        return "forward:/views/login.jsp";
     }
 
     /**
-     * æ–°å¢ç”¨æˆ·
-     * @param user æ–°å¢çš„ç”¨æˆ·ä¿¡æ¯
+     * @author cloudsoul-ZX
+     * æ–°å¢ç”¨æˆ·ï¼ˆç®¡ç†å‘˜ï¼‰
      */
     @ResponseBody
     @RequestMapping("/addUser")
@@ -85,24 +77,24 @@
     }
 
     /**
-     * åŠç†ç”¨æˆ·ç¦»èŒ
-     * @param id ç¦»èŒçš„ç”¨æˆ·id
+     * @author cloudsoul-ZX
+     * ç”¨æˆ·æ³¨é”€
      */
     @ResponseBody
     @RequestMapping("/delUser")
     public Result delUser(Integer id) {
         try {
             userService.delUser(id);
-            return new Result(true, "ç¦»èŒåŠç†æˆåŠŸ!");
+            return new Result(true, "æ³¨é”€åŠç†æˆåŠŸ!");
         } catch (Exception e) {
             e.printStackTrace();
-            return new Result(false, "ç¦»èŒåŠç†å¤±è´¥!");
+            return new Result(false, "æ³¨é”€åŠç†å¤±è´¥!");
         }
     }
 
     /**
-     * ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯
-     * @param user ä¿®æ”¹çš„ç”¨æˆ·ä¿¡æ¯
+     * @author cloudsoul-ZX
+     * ç¼–è¾‘ç”¨æˆ·ï¼ˆç®¡ç†å‘˜ï¼‰
      */
     @ResponseBody
     @RequestMapping("/editUser")
@@ -117,10 +109,8 @@
     }
 
     /**
+     * @author cloudsoul-ZX
      * æŸ¥è¯¢ç”¨æˆ·
-     * @param user æŸ¥è¯¢çš„æ¡ä»¶
-     * @param pageNum  æ•°æ®åˆ—è¡¨çš„å½“å‰é¡µç 
-     * @param pageSize æ•°æ®åˆ—è¡¨1é¡µå±•ç¤ºå¤šå°‘æ¡æ•°æ®
      */
     @RequestMapping("/search")
     public ModelAndView search(User user, Integer pageNum, Integer pageSize) {
@@ -157,8 +147,8 @@
     @ResponseBody
     @RequestMapping("/checkName")
     public Result checkName(String name) {
-        Integer count = userService.checkName(name);
-        if (count > 0) {
+        boolean result = userService.checkName(name);
+        if (result) {
             return new Result(false, "åå­—é‡å¤!");
         } else {
             return new Result(true, "åå­—å¯ç”¨!");
@@ -172,8 +162,8 @@
     @ResponseBody
     @RequestMapping("/checkEmail")
     public Result checkEmail(String email) {
-        Integer count = userService.checkEmail(email);
-        if (count > 0) {
+        boolean result = userService.checkEmail(email);
+        if (result) {
             return new Result(false, "é‚®ç®±é‡å¤!");
         } else {
             return new Result(true, "é‚®ç®±å¯ç”¨!");
Index: src/main/webapp/views/login.jsp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\" pageEncoding=\"UTF-8\" %>\r\n<html>\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <title>äº‘å€Ÿé˜…-å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ</title>\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"${pageContext.request.contextPath}/css/webbase.css\"/>\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"${pageContext.request.contextPath}/css/pages-login-manage.css\"/>\r\n    <script type=\"text/javascript\" src=\"${pageContext.request.contextPath}/js/jquery.min.js\"></script>\r\n</head>\r\n<body>\r\n<div class=\"loginmanage\">\r\n    <div class=\"py-container\">\r\n        <h4 class=\"manage-title\">äº‘å€Ÿé˜…-å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ</h4>\r\n        <div class=\"loginform\">\r\n            <ul class=\"sui-nav nav-tabs tab-wraped\">\r\n                <li class=\"active\">\r\n                    <h3>è´¦æˆ·ç™»å½•</h3>\r\n                </li>\r\n            </ul>\r\n            <div class=\"tab-content tab-wraped\">\r\n                <%--ç™»å½•æç¤ºä¿¡æ¯--%>\r\n                <span style=\"color: red\">${msg}</span>\r\n                <div id=\"profile\" class=\"tab-pane  active\">\r\n                    <form id=\"loginform\" class=\"sui-form\" action=\"${pageContext.request.contextPath}/user/login\"\r\n                          method=\"post\">\r\n                        <div class=\"input-prepend\"><span class=\"add-on loginname\">ç”¨æˆ·å</span>\r\n                            <input type=\"text\" placeholder=\"ä¼ä¸šé‚®ç®±\" class=\"span2 input-xfat\" name=\"email\">\r\n                        </div>\r\n                        <div class=\"input-prepend\"><span class=\"add-on loginpwd\">å¯†ç </span>\r\n                            <input type=\"password\" placeholder=\"è¯·è¾“å…¥å¯†ç \" class=\"span2 input-xfat\" name=\"password\">\r\n                        </div>\r\n                        <div class=\"logined\">\r\n                            <a class=\"sui-btn btn-block btn-xlarge btn-danger\"\r\n                               href='javascript:document:loginform.submit();' target=\"_self\">ç™»&nbsp;&nbsp;å½•</a>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n</body>\r\n<script type=\"text/javascript\">\r\n    /**\r\n     * ç™»å½•è¶…æ—¶ å±•ç¤ºåŒºè·³å‡ºiframe\r\n     */\r\n    var _topWin = window;\r\n    while (_topWin != _topWin.parent.window) {\r\n        _topWin = _topWin.parent.window;\r\n    }\r\n    if (window != _topWin)\r\n        _topWin.document.location.href = 'login.jsp';\r\n</script>\r\n</html>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/webapp/views/login.jsp b/src/main/webapp/views/login.jsp
--- a/src/main/webapp/views/login.jsp	(revision a7864dc864ac90d18346620717353b945bbf55ba)
+++ b/src/main/webapp/views/login.jsp	(date 1765177632249)
@@ -23,8 +23,8 @@
                 <div id="profile" class="tab-pane  active">
                     <form id="loginform" class="sui-form" action="${pageContext.request.contextPath}/user/login"
                           method="post">
-                        <div class="input-prepend"><span class="add-on loginname">ç”¨æˆ·å</span>
-                            <input type="text" placeholder="ä¼ä¸šé‚®ç®±" class="span2 input-xfat" name="email">
+                        <div class="input-prepend"><span class="add-on loginname">é‚®ç®±</span>
+                            <input type="text" placeholder="è´¦æˆ·é‚®ç®±" class="span2 input-xfat" name="email">
                         </div>
                         <div class="input-prepend"><span class="add-on loginpwd">å¯†ç </span>
                             <input type="password" placeholder="è¯·è¾“å…¥å¯†ç " class="span2 input-xfat" name="password">
Index: src/main/resources/mapper/UserMapper.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<!DOCTYPE mapper\r\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\r\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\r\n<mapper namespace=\"org.seventhgroup.dao.UserMapper\">\r\n\r\n    <!-- å®šä¹‰ç»“æœæ˜ å°„ -->\r\n    <resultMap id=\"userMap\" type=\"User\">\r\n        <id column=\"user_id\" property=\"id\"/>\r\n        <result column=\"user_name\" property=\"name\"/>\r\n        <result column=\"user_salt\" property=\"passwordSalt\"/>\r\n        <result column=\"user_hash\" property=\"passwordHash\"/>\r\n        <result column=\"user_email\" property=\"email\"/>\r\n        <result column=\"user_createdate\" property=\"createdate\"/>\r\n        <result column=\"user_role\" property=\"role\"/>\r\n        <result column=\"user_status\" property=\"status\"/>\r\n        <result column=\"user_deletedate\" property=\"deletedate\"/>\r\n    </resultMap>\r\n\r\n    <!-- è·å–ç”¨æˆ·å¯†ç ç›ä¸å“ˆå¸Œå€¼ -->\r\n    <select id=\"getSalt\" resultType=\"java.lang.String\">\r\n        SELECT user_salt\r\n        FROM user\r\n        WHERE user_email = #{email}\r\n    </select>\r\n    <select id=\"getHash\" resultType=\"java.lang.String\">\r\n        SELECT user_hash\r\n        FROM user\r\n        WHERE user_email = #{email}\r\n    </select>\r\n\r\n    <!-- ç”¨æˆ·ç™»å½•æŸ¥è¯¢ -->\r\n    <select id=\"login\" resultMap=\"userMap\">\r\n        SELECT\r\n            user_id,\r\n            user_name,\r\n            user_salt,\r\n            user_hash,\r\n            user_email,\r\n            user_createdate,\r\n            user_role,\r\n            user_status,\r\n            user_deletedate\r\n        FROM user\r\n        WHERE user_email = #{email}\r\n          AND user_status != ${@org.seventhgroup.pojo.User@DELETED}\r\n    </select>\r\n\r\n    <!-- ç”¨æˆ·æœç´¢æŸ¥è¯¢ -->\r\n    <select id=\"searchUsers\" resultMap=\"userMap\">\r\n        SELECT\r\n        user_id,\r\n        user_name,\r\n        user_salt,\r\n        user_hash,\r\n        user_email,\r\n        user_createdate,\r\n        user_role,\r\n        user_status,\r\n        user_deletedate\r\n        FROM user\r\n        WHERE 1 = 1\r\n        <if test=\"id != null\">\r\n            AND user_id LIKE CONCAT('%', #{id}, '%')\r\n        </if>\r\n        <if test=\"name != null\">\r\n            AND user_name LIKE CONCAT('%', #{name}, '%')\r\n        </if>\r\n        ORDER BY user_status\r\n    </select>\r\n\r\n    <!-- æ ¹æ®ç”¨æˆ·idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ -->\r\n    <select id=\"findById\" resultMap=\"userMap\">\r\n        SELECT\r\n            user_id,\r\n            user_name,\r\n            user_salt,\r\n            user_hash,\r\n            user_email,\r\n            user_createdate,\r\n            user_role,\r\n            user_status,\r\n            user_deletedate\r\n        FROM user\r\n        WHERE user_id = #{id}\r\n    </select>\r\n\r\n    <!-- æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²ç»å­˜åœ¨ -->\r\n    <select id=\"checkName\" resultType=\"java.lang.Integer\">\r\n        SELECT COUNT(user_name)\r\n        FROM user\r\n        WHERE user_name = #{name}\r\n    </select>\r\n\r\n    <!-- æ£€æŸ¥ç”¨æˆ·é‚®ç®±æ˜¯å¦å·²ç»å­˜åœ¨ -->\r\n    <select id=\"checkEmail\" resultType=\"java.lang.Integer\">\r\n        SELECT COUNT(user_email)\r\n        FROM user\r\n        WHERE user_email = #{email}\r\n    </select>\r\n\r\n    <!-- æ·»åŠ ç”¨æˆ· -->\r\n    <insert id=\"addUser\">\r\n        INSERT INTO user (\r\n            user_id,\r\n            user_name,\r\n            user_salt,\r\n            user_hash,\r\n            user_email,\r\n            user_createdate,\r\n            user_role,\r\n            user_status,\r\n            user_deletedate\r\n        ) VALUES (\r\n                     #{id},\r\n                     #{name},\r\n                     #{passwordSalt},\r\n                     #{passwordHash},\r\n                     #{email},\r\n                     #{createdate},\r\n                     #{role},\r\n                     #{status},\r\n                     #{deletedate}\r\n                 )\r\n    </insert>\r\n\r\n    <!-- ç¼–è¾‘ç”¨æˆ·ä¿¡æ¯ -->\r\n    <update id=\"editUser\" parameterType=\"User\">\r\n        UPDATE user\r\n        <set>\r\n            <if test=\"name != null\">\r\n                user_name = #{name},\r\n            </if>\r\n            <if test=\"passwordSalt != null\">\r\n                user_salt = #{passwordSalt},\r\n            </if>\r\n            <if test=\"passwordHash != null\">\r\n                user_hash = #{passwordHash},\r\n            </if>\r\n            <if test=\"email != null\">\r\n                user_email = #{email},\r\n            </if>\r\n            <if test=\"createdate != null\">\r\n                user_createdate = #{createdate},\r\n            </if>\r\n            <if test=\"status != null\">\r\n                user_status = #{status},\r\n            </if>\r\n            <if test=\"role != null\">\r\n                user_role = #{role},\r\n            </if>\r\n            <if test=\"deletedate != null\">\r\n                user_deletedate = #{deletedate},\r\n            </if>\r\n        </set>\r\n        WHERE user_id = #{id}\r\n    </update>\r\n\r\n</mapper>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/resources/mapper/UserMapper.xml b/src/main/resources/mapper/UserMapper.xml
--- a/src/main/resources/mapper/UserMapper.xml	(revision a7864dc864ac90d18346620717353b945bbf55ba)
+++ b/src/main/resources/mapper/UserMapper.xml	(date 1765179278575)
@@ -4,7 +4,7 @@
         "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="org.seventhgroup.dao.UserMapper">
 
-    <!-- å®šä¹‰ç»“æœæ˜ å°„ -->
+    <!-- å®šä¹‰Userç»“æœæ˜ å°„ -->
     <resultMap id="userMap" type="User">
         <id column="user_id" property="id"/>
         <result column="user_name" property="name"/>
@@ -16,15 +16,17 @@
         <result column="user_status" property="status"/>
         <result column="user_deletedate" property="deletedate"/>
     </resultMap>
+    <!-- å®šä¹‰UserPasswordDTOç»“æœæ˜ å°„ -->
+    <resultMap id="userPasswordMap" type="UserPasswordDTO">
+        <result column="user_salt" property="passwordSalt"/>
+        <result column="user_hash" property="passwordHash"/>
+    </resultMap>
 
     <!-- è·å–ç”¨æˆ·å¯†ç ç›ä¸å“ˆå¸Œå€¼ -->
-    <select id="getSalt" resultType="java.lang.String">
-        SELECT user_salt
-        FROM user
-        WHERE user_email = #{email}
-    </select>
-    <select id="getHash" resultType="java.lang.String">
-        SELECT user_hash
+    <select id="getPasswordDTO" resultMap="userPasswordMap">
+        SELECT
+            user_salt,
+            user_hash
         FROM user
         WHERE user_email = #{email}
     </select>
@@ -86,15 +88,15 @@
     </select>
 
     <!-- æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²ç»å­˜åœ¨ -->
-    <select id="checkName" resultType="java.lang.Integer">
-        SELECT COUNT(user_name)
+    <select id="checkName" resultType="java.lang.String">
+        SELECT user_name
         FROM user
         WHERE user_name = #{name}
     </select>
 
     <!-- æ£€æŸ¥ç”¨æˆ·é‚®ç®±æ˜¯å¦å·²ç»å­˜åœ¨ -->
-    <select id="checkEmail" resultType="java.lang.Integer">
-        SELECT COUNT(user_email)
+    <select id="checkEmail" resultType="java.lang.String">
+        SELECT user_email
         FROM user
         WHERE user_email = #{email}
     </select>
Index: .idea/dataSources.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"DataSourceManagerImpl\" format=\"xml\" multifile-model=\"true\">\r\n    <data-source source=\"LOCAL\" name=\"@localhost\" uuid=\"87e86e6e-c124-4e0b-9abb-11d2d797589b\">\r\n      <driver-ref>mysql.8</driver-ref>\r\n      <synchronize>true</synchronize>\r\n      <jdbc-driver>com.mysql.cj.jdbc.Driver</jdbc-driver>\r\n      <jdbc-url>jdbc:mysql://localhost:3306</jdbc-url>\r\n      <jdbc-additional-properties>\r\n        <property name=\"com.intellij.clouds.kubernetes.db.host.port\" />\r\n        <property name=\"com.intellij.clouds.kubernetes.db.enabled\" value=\"false\" />\r\n        <property name=\"com.intellij.clouds.kubernetes.db.container.port\" />\r\n      </jdbc-additional-properties>\r\n      <working-dir>$ProjectFileDir$</working-dir>\r\n    </data-source>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/dataSources.xml b/.idea/dataSources.xml
--- a/.idea/dataSources.xml	(revision a7864dc864ac90d18346620717353b945bbf55ba)
+++ b/.idea/dataSources.xml	(date 1765092282843)
@@ -13,5 +13,17 @@
       </jdbc-additional-properties>
       <working-dir>$ProjectFileDir$</working-dir>
     </data-source>
+    <data-source source="LOCAL" name="@localhost [2]" uuid="b28306a3-078a-449e-add0-173eff438628">
+      <driver-ref>mysql.8</driver-ref>
+      <synchronize>true</synchronize>
+      <jdbc-driver>com.mysql.cj.jdbc.Driver</jdbc-driver>
+      <jdbc-url>jdbc:mysql://localhost:3306</jdbc-url>
+      <jdbc-additional-properties>
+        <property name="com.intellij.clouds.kubernetes.db.host.port" />
+        <property name="com.intellij.clouds.kubernetes.db.enabled" value="false" />
+        <property name="com.intellij.clouds.kubernetes.db.container.port" />
+      </jdbc-additional-properties>
+      <working-dir>$ProjectFileDir$</working-dir>
+    </data-source>
   </component>
 </project>
\ No newline at end of file
Index: src/main/java/org/seventhgroup/dao/UserMapper.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package org.seventhgroup.dao;\r\n\r\nimport com.github.pagehelper.Page;\r\nimport org.apache.ibatis.annotations.*;\r\nimport org.seventhgroup.pojo.User;\r\nimport org.springframework.stereotype.Repository;\r\n\r\n/**\r\n * ç”¨æˆ·æ“ä½œæ¥å£\r\n */\r\n@Mapper\r\n@Repository\r\npublic interface UserMapper{\r\n    //è·å–ç”¨æˆ·ç›ä¸å“ˆå¸Œå€¼\r\n    String getSalt(User user);\r\n    String getHash(User user);\r\n    //ç”¨æˆ·ç™»å½•\r\n    User login(User user);\r\n    //æ–°å¢ç”¨æˆ·\r\n    void addUser(User user);\r\n    //ç¼–è¾‘ç”¨æˆ·ä¿¡æ¯\r\n    void editUser(User user);\r\n    //æœç´¢ç”¨æˆ·\r\n    Page<User> searchUsers(User user );\r\n    //æ ¹æ®ç”¨æˆ·idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯\r\n    User findById(Integer id);\r\n    //æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²ç»å­˜åœ¨\r\n    Integer checkName(String name);\r\n    //æ£€æŸ¥ç”¨æˆ·é‚®ç®±æ˜¯å¦å·²ç»å­˜åœ¨\r\n    Integer checkEmail(String email);\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/seventhgroup/dao/UserMapper.java b/src/main/java/org/seventhgroup/dao/UserMapper.java
--- a/src/main/java/org/seventhgroup/dao/UserMapper.java	(revision a7864dc864ac90d18346620717353b945bbf55ba)
+++ b/src/main/java/org/seventhgroup/dao/UserMapper.java	(date 1765179027670)
@@ -2,6 +2,7 @@
 
 import com.github.pagehelper.Page;
 import org.apache.ibatis.annotations.*;
+import org.seventhgroup.dto.UserPasswordDTO;
 import org.seventhgroup.pojo.User;
 import org.springframework.stereotype.Repository;
 
@@ -12,8 +13,7 @@
 @Repository
 public interface UserMapper{
     //è·å–ç”¨æˆ·ç›ä¸å“ˆå¸Œå€¼
-    String getSalt(User user);
-    String getHash(User user);
+    UserPasswordDTO getPasswordDTO(User user);
     //ç”¨æˆ·ç™»å½•
     User login(User user);
     //æ–°å¢ç”¨æˆ·
@@ -25,7 +25,7 @@
     //æ ¹æ®ç”¨æˆ·idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
     User findById(Integer id);
     //æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²ç»å­˜åœ¨
-    Integer checkName(String name);
+    String checkName(String name);
     //æ£€æŸ¥ç”¨æˆ·é‚®ç®±æ˜¯å¦å·²ç»å­˜åœ¨
-    Integer checkEmail(String email);
+    String checkEmail(String email);
 }
\ No newline at end of file
Index: src/main/java/org/seventhgroup/config/MyBatisConfig.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package org.seventhgroup.config;\r\n\r\nimport com.github.pagehelper.PageInterceptor;\r\nimport org.apache.ibatis.plugin.Interceptor;\r\nimport org.mybatis.spring.SqlSessionFactoryBean;\r\nimport org.mybatis.spring.mapper.MapperScannerConfigurer;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.core.io.Resource;\r\nimport org.springframework.core.io.support.PathMatchingResourcePatternResolver;\r\nimport javax.sql.DataSource;\r\nimport java.io.IOException;\r\nimport java.util.Properties;\r\n\r\n@Configuration\r\npublic class MyBatisConfig {\r\n\r\n    /**é…ç½®PageInterceptoråˆ†é¡µæ’ä»¶*/\r\n    @Bean\r\n    public PageInterceptor getPageInterceptor() {\r\n        PageInterceptor pageInterceptor = new PageInterceptor();\r\n        Properties properties = new Properties();\r\n        properties.setProperty(\"value\", \"true\");\r\n        pageInterceptor.setProperties(properties);\r\n        return pageInterceptor;\r\n    }\r\n\r\n    @Bean\r\n    public SqlSessionFactoryBean getSqlSessionFactoryBean(@Autowired DataSource dataSource,\r\n                                                          @Autowired PageInterceptor pageInterceptor) throws IOException {\r\n        SqlSessionFactoryBean ssfb = new SqlSessionFactoryBean();\r\n\r\n        // è®¾ç½®æ•°æ®æº\r\n        ssfb.setDataSource(dataSource);\r\n\r\n        // è®¾ç½®åˆ†é¡µæ’ä»¶\r\n        Interceptor[] plugins = {pageInterceptor};\r\n        ssfb.setPlugins(plugins);\r\n\r\n        // \uD83D\uDD25 å…³é”®é…ç½®ï¼šè®¾ç½®XMLæ˜ å°„æ–‡ä»¶è·¯å¾„ï¼ˆresourcesç›®å½•ä¸‹ï¼‰\r\n        Resource[] resources = new PathMatchingResourcePatternResolver()\r\n                .getResources(\"classpath:mapper/*.xml\");\r\n        ssfb.setMapperLocations(resources);\r\n\r\n        ssfb.setTypeAliasesPackage(\"org.seventhgroup.pojo\");\r\n        return ssfb;\r\n    }\r\n\r\n    @Bean\r\n    public MapperScannerConfigurer getMapperScannerConfigurer(){\r\n        MapperScannerConfigurer msc = new MapperScannerConfigurer();\r\n        msc.setBasePackage(\"org.seventhgroup.dao\");\r\n        return msc;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/seventhgroup/config/MyBatisConfig.java b/src/main/java/org/seventhgroup/config/MyBatisConfig.java
--- a/src/main/java/org/seventhgroup/config/MyBatisConfig.java	(revision a7864dc864ac90d18346620717353b945bbf55ba)
+++ b/src/main/java/org/seventhgroup/config/MyBatisConfig.java	(date 1765176757565)
@@ -31,19 +31,19 @@
                                                           @Autowired PageInterceptor pageInterceptor) throws IOException {
         SqlSessionFactoryBean ssfb = new SqlSessionFactoryBean();
 
-        // è®¾ç½®æ•°æ®æº
+        //è®¾ç½®æ•°æ®æº
         ssfb.setDataSource(dataSource);
 
-        // è®¾ç½®åˆ†é¡µæ’ä»¶
+        //è®¾ç½®åˆ†é¡µæ’ä»¶
         Interceptor[] plugins = {pageInterceptor};
         ssfb.setPlugins(plugins);
 
-        // ğŸ”¥ å…³é”®é…ç½®ï¼šè®¾ç½®XMLæ˜ å°„æ–‡ä»¶è·¯å¾„ï¼ˆresourcesç›®å½•ä¸‹ï¼‰
+        //è®¾ç½®XMLæ˜ å°„æ–‡ä»¶è·¯å¾„ï¼ˆresourcesç›®å½•ä¸‹ï¼‰
         Resource[] resources = new PathMatchingResourcePatternResolver()
                 .getResources("classpath:mapper/*.xml");
         ssfb.setMapperLocations(resources);
-
-        ssfb.setTypeAliasesPackage("org.seventhgroup.pojo");
+        //ç»™åŒ…è®¾ç½®åˆ«å
+        ssfb.setTypeAliasesPackage("org.seventhgroup.pojo, org.seventhgroup.dto");
         return ssfb;
     }
 
Index: src/main/webapp/views/user.jsp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\" pageEncoding=\"UTF-8\" %>\r\n<%@ taglib uri=\"http://java.sun.com/jsp/jstl/core\" prefix=\"c\" %>\r\n<html>\r\n\r\n<head>\r\n    <!-- é¡µé¢meta -->\r\n    <meta charset=\"utf-8\">\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n    <title>äººå‘˜ç®¡ç†</title>\r\n    <link rel=\"stylesheet\" href=\"${pageContext.request.contextPath}/css/bootstrap.css\">\r\n    <link rel=\"stylesheet\" href=\"${pageContext.request.contextPath}/css/AdminLTE.css\">\r\n    <link rel=\"stylesheet\" href=\"${pageContext.request.contextPath}/css/pagination.css\">\r\n    <script src=\"${pageContext.request.contextPath}/js/jquery.min.js\"></script>\r\n    <script src=\"${pageContext.request.contextPath}/js/bootstrap.js\"></script>\r\n    <script src=\"${pageContext.request.contextPath}/js/pagination.js\"></script>\r\n    <script src=\"${pageContext.request.contextPath}/js/my.js\"></script>\r\n</head>\r\n<body class=\"hold-transition skin-red sidebar-mini\">\r\n<!-- .box-body -->\r\n<div class=\"box-header with-border\">\r\n    <h3 class=\"box-title\">äººå‘˜ç®¡ç†</h3>\r\n</div>\r\n<div class=\"box-body\">\r\n    <!-- æ•°æ®è¡¨æ ¼ -->\r\n    <div class=\"table-box\">\r\n        <!--å·¥å…·æ -->\r\n        <div class=\"pull-left\">\r\n            <div class=\"form-group form-inline\">\r\n                <div class=\"btn-group\">\r\n                    <button type=\"button\" class=\"btn btn-default\" title=\"æ–°å»º\" data-toggle=\"modal\"\r\n                            data-target=\"#addModal\" onclick=\"resetUserFrom()\"><i class=\"fa fa-file-o\" ></i> æ–°å¢\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"box-tools pull-right\">\r\n            <div class=\"has-feedback\">\r\n                <form action=\"${pageContext.request.contextPath}/user/search\" method=\"post\">\r\n                    å·¥å·ï¼š<input name=\"id\" value=\"${user.id}\">&nbsp&nbsp&nbsp&nbsp\r\n                    å§“åï¼š<input name=\"name\" value=\"${user.name}\">&nbsp&nbsp&nbsp&nbsp\r\n                    <input class=\"btn btn-default\" type=\"submit\" value=\"æŸ¥è¯¢\">\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!--å·¥å…·æ /-->\r\n    <!--æ•°æ®åˆ—è¡¨-->\r\n    <table id=\"dataList\" class=\"table table-bordered table-striped table-hover dataTable text-center\">\r\n        <thead>\r\n        <tr class=\"text-center\">\r\n            <th>å·¥å·</th>\r\n            <th>å§“å</th>\r\n            <th>é‚®ç®±</th>\r\n            <th>æ³¨å†Œæ—¶é—´</th>\r\n            <th>æ³¨å†ŒçŠ¶æ€</th>\r\n            <th>æ“ä½œ</th>\r\n        </tr>\r\n        </thead>\r\n        <tbody>\r\n        <c:forEach items=\"${pageResult.rows}\" var=\"user\">\r\n            <tr>\r\n                <td>${user.id}</td>\r\n                <td>${user.name}</td>\r\n                <td>${user.email}</td>\r\n                <td>${user.createdate}</td>\r\n                <td>\r\n                    <c:if test=\"${user.status == 0}\">\r\n                        å·²æ³¨å†Œ\r\n                    </c:if>\r\n                    <c:if test=\"${user.status == 1}\">\r\n                        å·²æ³¨é”€\r\n                    </c:if>\r\n\r\n                </td>\r\n                <td class=\"text-center\">\r\n                    <c:if test=\"${user.status == 0}\">\r\n                        <button type=\"button\" class=\"btn bg-olive btn-xs\" data-toggle=\"modal\" data-target=\"#editModal\"\r\n                                onclick=\"findUserById(${user.id})\">ä¿®æ”¹\r\n                        </button>\r\n                        &nbsp&nbsp&nbsp&nbsp\r\n                        <button type=\"button\" class=\"btn bg-olive btn-xs\" onclick=\"delUser(${user.id})\">æ³¨é”€</button>\r\n                    </c:if>\r\n\r\n                </td>\r\n            </tr>\r\n        </c:forEach>\r\n        </tbody>\r\n    </table>\r\n    <!--æ•°æ®åˆ—è¡¨/-->\r\n    <div id=\"pagination\" class=\"pagination\"></div>\r\n</div>\r\n<!-- æ•°æ®è¡¨æ ¼ /-->\r\n</div>\r\n<!-- /.box-body -->\r\n<tm-pagination conf=\"paginationConf\"></tm-pagination>\r\n\r\n<!-- æ–°å¢çª—å£ -->\r\n<div class=\"modal fade\" id=\"addModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\">\r\n    <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">Ã—</button>\r\n                <h3 id=\"myModalLabel\">äººå‘˜ä¿¡æ¯</h3>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                <form id=\"addUser\">\r\n                    <table class=\"table table-bordered table-striped\" width=\"800px\">\r\n                        <tr>\r\n                            <td>äººå‘˜å§“å</td>\r\n                            <td><input class=\"form-control\" placeholder=\"äººå‘˜å§“å\" id=\"adduname\" onblur=\"checkVal()\" onfocus=\"changeVal()\" name=\"name\"></td>\r\n                            <td>ä¼ä¸šé‚®ç®±</td>\r\n                            <td><input class=\"form-control\" placeholder=\"ä¼ä¸šé‚®ç®±\" id=\"adduemail\" onblur=\"checkVal()\" onfocus=\"changeVal()\"name=\"email\"></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>æ³¨å†Œæ—¶é—´</td>\r\n                            <td><input type=\"date\" class=\"form-control\" name=\"createdate\" id=\"time\"  onchange=\"checkVal()\" onfocus=\"changeVal()\"name=\"createdate\"></td>\r\n                            <td>ç™»å½•å¯†ç </td>\r\n                            <td><input class=\"form-control\" placeholder=\"ç™»å½•å¯†ç \" id=\"addPw\" onblur=\"checkVal()\" onfocus=\"changeVal()\" name=\"password\"></td>\r\n                        </tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>ç”¨æˆ·è§’è‰²</td>\r\n\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t<select class=\"form-control\" name=\"role\" value=\"USER\">\r\n\t\t\t\t\t\t\t\t\t<option value=\"USER\">æ™®é€šç”¨æˆ·</option>\r\n\t\t\t\t\t\t\t\t\t<option value=\"ADMIN\">ç®¡ç†å‘˜</option>\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</td>\r\n                            <td colspan=\"2\"><span style=\"color: red\" id=\"addmsg\"></span></td>\r\n\t\t\t\t\t\t</tr>\r\n                    </table>\r\n                </form>\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button class=\"btn btn-success\" data-dismiss=\"modal\" aria-hidden=\"true\" id=\"savemsg\" disabled=\"true\"\r\n                        onclick=\"saveUser()\">ä¿å­˜\r\n                </button>\r\n                <button class=\"btn btn-default\" data-dismiss=\"modal\" aria-hidden=\"true\">å…³é—­</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- ç¼–è¾‘çª—å£ -->\r\n<div class=\"modal fade\" id=\"editModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\">\r\n    <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">Ã—</button>\r\n                <h3 id=\"myModalLabe2\">äººå‘˜ä¿¡æ¯</h3>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                <form id=\"editUser\">\r\n                    <table class=\"table table-bordered table-striped\" width=\"800px\">\r\n\r\n                        <tr>\r\n                            <td>äººå‘˜å§“å</td>\r\n                            <td><input class=\"form-control\"  readonly name=\"name\" id=\"uname\"></td>\r\n                            <td>äººå‘˜å·¥å·</td>\r\n                            <td><input class=\"form-control\"  readonly name=\"id\" id=\"uid\"></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>ä¼ä¸šé‚®ç®±</td>\r\n                            <td><input class=\"form-control\" readonly name=\"email\" id=\"uemail\" >\r\n                            </td>\r\n                            <td>æ³¨å†Œæ—¶é—´</td>\r\n                            <td><input class=\"form-control\" readonly name=\"createdate\" id=\"uhire\" ></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>ç™»å½•å¯†ç </td>\r\n                            <td><input class=\"form-control\" type=\"password\"  name=\"password\" id=\"pw\"></td>\r\n\t\t\t\t\t\t\t<td>ç”¨æˆ·è§’è‰²</td>\r\n\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t<select class=\"form-control\" id=\"urole\" name=\"role\" >\r\n\t\t\t\t\t\t\t\t\t<option value=\"USER\">æ™®é€šç”¨æˆ·</option>\r\n\t\t\t\t\t\t\t\t\t<option value=\"ADMIN\">ç®¡ç†å‘˜</option>\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</td>\r\n                        </tr>\r\n                    </table>\r\n                </form>\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button class=\"btn btn-success\" data-dismiss=\"modal\" aria-hidden=\"true\" onclick=\"editUser()\">ä¿å­˜</button>\r\n                <button class=\"btn btn-default\" data-dismiss=\"modal\" aria-hidden=\"true\">å…³é—­</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n</body>\r\n<script>\r\n    //æ€»é¡µæ•°\r\n    pageargs.total=Math.ceil(${pageResult.total}/pageargs.pagesize);\r\n    //å½“å‰é¡µæ•°\r\n    pageargs.cur=${pageNum}\r\n     pageargs.gourl=\"${gourl}\"\r\n    userVO.id=\"${search.id}\"\r\n    userVO.name=\"${search.name}\"\r\n    pagination(pageargs);\r\n</script>\r\n</html>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/webapp/views/user.jsp b/src/main/webapp/views/user.jsp
--- a/src/main/webapp/views/user.jsp	(revision a7864dc864ac90d18346620717353b945bbf55ba)
+++ b/src/main/webapp/views/user.jsp	(date 1765177398752)
@@ -108,8 +108,8 @@
                         <tr>
                             <td>äººå‘˜å§“å</td>
                             <td><input class="form-control" placeholder="äººå‘˜å§“å" id="adduname" onblur="checkVal()" onfocus="changeVal()" name="name"></td>
-                            <td>ä¼ä¸šé‚®ç®±</td>
-                            <td><input class="form-control" placeholder="ä¼ä¸šé‚®ç®±" id="adduemail" onblur="checkVal()" onfocus="changeVal()"name="email"></td>
+                            <td>è´¦æˆ·é‚®ç®±</td>
+                            <td><input class="form-control" placeholder="è´¦æˆ·é‚®ç®±" id="adduemail" onblur="checkVal()" onfocus="changeVal()"name="email"></td>
                         </tr>
                         <tr>
                             <td>æ³¨å†Œæ—¶é—´</td>
@@ -159,7 +159,7 @@
                             <td><input class="form-control"  readonly name="id" id="uid"></td>
                         </tr>
                         <tr>
-                            <td>ä¼ä¸šé‚®ç®±</td>
+                            <td>è´¦æˆ·é‚®ç®±</td>
                             <td><input class="form-control" readonly name="email" id="uemail" >
                             </td>
                             <td>æ³¨å†Œæ—¶é—´</td>
